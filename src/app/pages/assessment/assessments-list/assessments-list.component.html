<app-master-data-list
  [columns]="columns"
  [data]="data"
  [pageInfo]="pageInfo"
  [loading]="loading"
  [actions]="actions"
  (pageChange)="onPageChange($event)"
  (sort)="onSort($event)"
  (filter)="onFilter($event)"
  (executeAction)="onAction($event)"
  (rowClick)="onAssessmentSelect($event)"
>
<nz-modal [(nzVisible)]="isVisible" [nzTitle]="modalTitle" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
  <ng-container *nzModalContent>
    <qrcode [qrdata]="newUrl.toString()" [width]="450" [errorCorrectionLevel]="'M'"></qrcode>
  </ng-container>
</nz-modal>
<ng-template #modalTitle>
  <h5>{{modalData.patient.firstName}} {{modalData.patient.lastName}}</h5>
  <p>{{modalData.assessmentType.name}}</p>
</ng-template>
  <ng-container actions-left>
    <app-master-data-search (search)="onSearch($event)"></app-master-data-search>
    <button
      nz-button
      nzType="primary"
      (click)="onMyAssessments()"
      *ngIf="perms.permissionsOnly([PK.MANAGE_ASSESSMENTS])"
    >
      {{ 'assessments.myAssessment' | translate }}
    </button>
    <button
      nz-button
      nzType="primary"
      (click)="onArchivedAssessments()"
      *ngIf="perms.permissionsOnly([PK.MANAGE_ASSESSMENTS]) && !onlyArchivedAssessments"
    >
      {{ 'assessments.archivedAssessments' | translate }}
    </button>
    <button
      nz-button
      nzType="primary"
      (click)="onArchivedAssessments()"
      *ngIf="perms.permissionsOnly([PK.MANAGE_ASSESSMENTS]) && onlyArchivedAssessments"
    >
      {{ 'assessments.notArchivedAssessments' | translate }}
    </button>
  </ng-container>
  <ng-container actions-right>
    <button
      nz-button
      nzType="primary"
      nzShape="circle"
      routerLink="/mhira/assessments/plan-assessments"
      *ngIf="perms.permissionsOnly(PK.MANAGE_ASSESSMENTS)"
    >
      <i nz-icon nzType="plus"></i>
    </button>
  </ng-container>
</app-master-data-list>
